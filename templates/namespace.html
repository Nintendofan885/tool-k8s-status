{% extends "layout.html" %}

{% block title %}Namespace {{ namespace }} - {{ super() }}{% endblock %}

{% block content %}
<ol class="breadcrumb">
  <li><a href="{{ url_for('namespaces') }}" rel="nofollow">Namespaces</a></li>
  <li class="active">{{ namespace }}</li>
</ol>
<div class="page-header">
  <h1>Namespace: {{ namespace|capitalize }}</a></h1>
</div>

<div class="panel-group" role="tablist">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Pods</h3>
    </div>
    <table class="table table-condensed table-hover tablesorter">
      <thead>
        <tr>
          <th>Name</th>
          <th>Labels</th>
          <th>Ready</th>
          <th>Phase</th>
          <th>Restarts</th>
          <th>Node</th>
          <th>Age</th>
        </tr>
      </thead>
      <tbody>
        {% for pod in pods["items"] %}
        <tr>
          <td>{{ pod.metadata.name }}</td>
          <td>
            {% for key, value in pod.metadata.labels %}
            {{ key }}:{{ value }}
            {% endfor %}
          </td>
          <td>{{ pod.status.container_statuses|selectattr('ready', 'equalto', 'True')|list|length }}/{{ pod.status.container_statuses|length }}
          </td>
          <td>{{ pod.status.phase }}</td>
          <td>{{ pod.status.container_statuses|sum(attribute='restart_count') }}|</td>
          <td>{{ pod.status.start_time|summarize }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

{% block css %}
<link rel="stylesheet" href="https://tools-static.wmflabs.org/cdnjs/ajax/libs/jquery.tablesorter/2.28.5/css/theme.default.min.css" crossorigin="anonymous">
{% endblock %}

{% block js %}
{{ super() }}
<script src="https://tools-static.wmflabs.org/cdnjs/ajax/libs/jquery.tablesorter/2.28.5/js/jquery.tablesorter.min.js" crossorigin="anonymous"></script>
<script type="text/javascript">
$(document).ready(function() {
  $(".tablesorter").tablesorter();
});
</script>
{% endblock %}
{# vim:sw=2:ts=2:sts=2:et: #}
